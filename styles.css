// Ano no rodapé
document.getElementById('year').textContent = new Date().getFullYear();

// Menu mobile
const hamb = document.getElementById('hamb');
const menu = document.getElementById('menu');
if (hamb && menu){
  hamb.addEventListener('click', ()=>{
    const open = menu.classList.toggle('open');
    hamb.setAttribute('aria-expanded', open ? 'true' : 'false');
  });
}

// Lightbox do portfólio
const lb = document.getElementById('lightbox');
const lbImg = document.getElementById('lightboxImg');
document.querySelectorAll('.shot img').forEach(img=>{
  img.addEventListener('click', ()=>{
    lbImg.src = img.dataset.full || img.src;
    lb.classList.add('open'); lb.setAttribute('aria-hidden','false');
  });
});
document.querySelector('.lightbox__close').addEventListener('click', ()=>{
  lb.classList.remove('open'); lb.setAttribute('aria-hidden','true'); lbImg.src="";
});
lb.addEventListener('click', (e)=>{ if(e.target===lb) { lb.classList.remove('open'); lbImg.src=""; }});

// WhatsApp global
const WA_NUMBER = window.WHATSAPP_NUMBER || "5543988632851";

// Botão zap direto
document.getElementById('btnZapDireto').setAttribute(
  'href',
  `https://wa.me/${WA_NUMBER}?text=${encodeURIComponent("Oi Erick! Quero falar sobre fotos.")}
`);

// Form — Plano Personalizado
const formPlano = document.getElementById('formPlano');
formPlano.addEventListener('submit', (e)=>{
  e.preventDefault();
  const d = new FormData(formPlano);

  const msg =
`Olá, Erick! Montei meu plano personalizado:
• Tipo: ${d.get('tipo')}
• Data: ${d.get('data')}
• Duração: ${d.get('duracao')}
• Mínimo de fotos que espero: ${d.get('minFotos') || 'a combinar'}
• Clipes curtos: ${d.get('clips') || 0}
• Making of compacto: ${d.get('making') ? 'Sim' : 'Não'}
• Álbum 20×20: ${d.get('album') ? 'Sim' : 'Não'}
• Segundo fotógrafo/assistente: ${d.get('assistente') ? 'Sim' : 'Não'}
• Entrega expressa: ${d.get('express') ? 'Sim' : 'Não'}
• Local/Bairro: ${d.get('local') || '—'}
• Km fora de Ibiporã: ${d.get('km') || 0}
• Nome: ${d.get('nome')}
• WhatsApp: ${d.get('zap') || '—'}
• Detalhes: ${d.get('detalhes') || '—'}

Importante: você entrega TODAS as fotos boas tratadas, sem limite. Aguardo o valor.`;

  window.open(`https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(msg)}`,'_blank');
});
